# Projectoverzicht: Huisarts open voor inschrijving

## Beschrijving
Een Apps Script applicatie die huisartsenpraktijk websites monitort om te controleren of ze nieuwe patiënten aannemen. Gebruikers kunnen zich aanmelden met hun Google account, een persoonlijke lijst met URLs van huisartsen opgeven, en worden via e-mail op de hoogte gebracht wanneer een huisarts van status verandert naar het aannemen van nieuwe patiënten.

## Architectuur: Modulestructuur
De applicatie is opgebouwd volgens een modulaire structuur voor Apps Script, waarin elke module een specifieke functionaliteit afhandelt:

### Modulestructuur:
1. Main Apps Script Project
   - Code.gs (Hoofdbestand met onEntry points)
   - appsscript.json (Project manifest)

2. Front-end Modules
   - UI.gs (Web interface en gebruikersinteractie)
   - HtmlTemplates/ (HTML-templates voor de web interface)

3. Back-end Modules
   - DataLayer.gs (Database interacties)
   - WebsiteChecker.gs (Website controle functionaliteit)
   - OpenAIService.gs (Integratie met OpenAI web search API)
   - EmailService.gs (Email notificatie service)
   - AuthService.gs (Google authenticatie service)

4. Hulpmodules
   - Utilities.gs (Algemene hulpfuncties)
   - Config.gs (Configuratie-instellingen)
   - Logger.gs (Logging functionaliteit)

5. Documentatie
   - README.md (Uitgebreide installatie- en configuratiegids)

## Per module details:

### Code.gs
- Status: Geïmplementeerd en gemerged
- Bestandsnaam: Code.gs
- Functionaliteit: Bevat de hoofdentry points voor de applicatie, inclusief het starten van de UI en het instellen van triggers voor periodieke controles
- Afhankelijkheid: UI.gs, AuthService.gs, DataLayer.gs, Logger.gs, WebsiteChecker.gs

### appsscript.json
- Status: Geïmplementeerd (PR #2 gemerged)
- Bestandsnaam: appsscript.json
- Functionaliteit: Manifest bestand voor Apps Script project, met benodigde API-toegang en bibliotheekverwijzingen
- Afhankelijkheid: Geen

### UI.gs
- Status: Geïmplementeerd (PR #8 gemerged)
- Bestandsnaam: UI.gs
- Functionaliteit: Beheert de webinterface en gebruikersinteractie, rendert verschillende pagina's en afhandelt formulierverwerking
- Afhankelijkheid: HtmlTemplates/, AuthService.gs, DataLayer.gs, Logger.gs

### HtmlTemplates/
- Status: Geïmplementeerd (PR #2 gemerged, bijgewerkt in PR #6)
- Bestandsnaam: Meerdere .html bestanden
- Functionaliteit: HTML-templates voor verschillende pagina's in de webinterface, inclusief login en dashboard
- Afhankelijkheid: Geen

### DataLayer.gs
- Status: Geïmplementeerd (PR #4 gemerged)
- Bestandsnaam: DataLayer.gs
- Functionaliteit: Handelt database interacties af met Google Spreadsheet als dataopslag, biedt CRUD-operaties voor gebruikers, huisartsenpraktijken en controles
- Afhankelijkheid: Config.gs, Logger.gs

### WebsiteChecker.gs
- Status: Geïmplementeerd
- Bestandsnaam: WebsiteChecker.gs
- Functionaliteit: Beheert het proces van het controleren van websites, detecteert statusveranderingen en plant controles
- Afhankelijkheid: OpenAIService.gs, DataLayer.gs, Logger.gs, EmailService.gs

### OpenAIService.gs
- Status: Geïmplementeerd (PR #10 gemerged)
- Bestandsnaam: OpenAIService.gs
- Functionaliteit: Integratie met OpenAI API voor het analyseren van huisartswebsites, inclusief extractie van relevante informatie en classificatie van patiëntenstatus
- Afhankelijkheid: Config.gs, Logger.gs

### EmailService.gs
- Status: Geïmplementeerd (PR #14 gemerged)
- Bestandsnaam: EmailService.gs
- Functionaliteit: Beheert het verzenden van e-mailnotificaties aan gebruikers bij statuswijzigingen, inclusief HTML-templates en gebruikersvoorkeuren
- Afhankelijkheid: DataLayer.gs, Config.gs, Logger.gs

### AuthService.gs
- Status: Geïmplementeerd (PR #6 gemerged)
- Bestandsnaam: AuthService.gs
- Functionaliteit: Handelt Google authenticatie en gebruikersbeheer af, inclusief login/logout en het bijwerken van gebruikersinstellingen
- Afhankelijkheid: DataLayer.gs, Config.gs, Logger.gs

### Utilities.gs
- Status: Niet gestart (gepland als nice-to-have)
- Bestandsnaam: Utilities.gs
- Functionaliteit: Bevat algemene hulpfuncties die door meerdere modules worden gebruikt
- Afhankelijkheid: Geen

### Config.gs
- Status: Geïmplementeerd (PR #2 gemerged)
- Bestandsnaam: Config.gs
- Functionaliteit: Bevat configuratie-instellingen voor de applicatie
- Afhankelijkheid: Geen

### Logger.gs
- Status: Geïmplementeerd (PR #2 gemerged)
- Bestandsnaam: Logger.gs
- Functionaliteit: Voorziet in logging functionaliteit voor de applicatie
- Afhankelijkheid: Config.gs

### README.md
- Status: Bijgewerkt (PR #16 in review)
- Bestandsnaam: README.md
- Functionaliteit: Bevat uitgebreide documentatie voor installatie, configuratie en gebruik van de applicatie
- Afhankelijkheid: Geen
